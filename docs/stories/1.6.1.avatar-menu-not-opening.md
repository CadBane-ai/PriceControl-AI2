# Story 1.6.1: Avatar Menu Not Opening (Logout Inaccessible)

## Status
Ready

## Story
As a logged-in user, I want to open the account dropdown from the top-right avatar and click “Log out”, so that I can sign out of my account.

## Context
- Observed on production (Vercel) after 1.6 deploy: clicking the top-right avatar showing “PC” does nothing; it appears non-interactive. This prevents access to the “Log out” action delivered in Story 1.6.
- Locally, the dropdown appears to work under typical conditions; issue likely related to layering/z-index or an overlay in production.

## Acceptance Criteria
1. Clicking the top-right avatar opens a dropdown with Account, Billing, Toggle theme, and Log out.
2. Selecting “Log out” invokes `signOut({ callbackUrl: '/login' })` and redirects to `/login`.
3. Dropdown opens on `/dashboard`, `/account`, and `/billing` in Production, Preview, and Dev builds.
4. No visual regressions to header layout; avatar remains focusable and keyboard accessible.

## Tasks / Subtasks
- [ ] Reproduce the issue on a Vercel Preview to capture console logs.
- [ ] Ensure header is above potential overlays (e.g., increase z-index on TopBar header container).
- [ ] Validate the DropdownMenu trigger semantics (button element and focus/keyboard activation).
- [ ] Verify no overlay from mobile Sheet covers the header when closed.
- [ ] Test on `/dashboard`, `/account`, `/billing` across Dev/Preview/Prod.

## Dev Notes
- Code references:
  - Top bar: `apps/web/components/dashboard/top-bar.tsx`
  - Dropdown UI: `apps/web/components/ui/dropdown-menu.tsx`
  - Session provider: `apps/web/app/layout.tsx`
- Quick mitigation if layering persists: add a visible secondary “Logout” icon button next to the avatar. Keep dropdown as the primary UX.

## Testing
- Manual:
  - Login → go to `/dashboard` → click avatar → dropdown opens → click “Log out” → redirected to `/login`.
  - Keyboard: Tab to avatar → Enter/Space opens menu → Arrow keys navigate → Enter “Log out”.
  - Repeat on `/account`, `/billing` and on Preview/Prod builds.

## QA Results

- Pending

## Dev Agent Record
- Assigned To: Dev Agent
- Priority: High (blocks sign out)
- Notes: Implement z-index fix and verify in Preview; follow up with additional mitigation only if needed.

