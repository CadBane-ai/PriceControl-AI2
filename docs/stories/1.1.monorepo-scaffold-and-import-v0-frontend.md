# Story 1.1: Monorepo Scaffold and Import v0 Frontend

## Status
Approved

## Story
**As a** developer,
**I want** to scaffold a pnpm monorepo and import the existing Vercel v0-generated Next.js app into `apps/web`,
**so that** we have a clean, deployable foundation for subsequent DB, auth, and AI features.

## Acceptance Criteria
1. Root has `pnpm-workspace.yaml` with workspaces `apps/*` and `packages/*`.
2. Root has `package.json` with scripts `dev`, `build`, `start`, `lint`, `test` delegating to `apps/web`.
3. Root has `tsconfig.base.json` configured for shared settings; `apps/web` TypeScript config extends it.
4. The current `pricecontrol` app is moved to `apps/web` without functional regressions.
5. Tailwind/shadcn config remains functional; path aliases using `@/*` resolve within `apps/web`.
6. From the repo root, `pnpm install` and `pnpm dev` run the app successfully (using existing mock APIs).
7. Root `README.md` documents monorepo layout and how to run the app from root.
8. No environment variables or secrets are introduced in this story (deferred to Environment & Config story).

## Tasks / Subtasks
- [x] Create root workspace files (AC: 1–3)
  - [x] Add `pnpm-workspace.yaml` with `apps/*` and `packages/*`.
  - [x] Add root `package.json` with scripts delegating to `apps/web`.
  - [x] Add `tsconfig.base.json` and ensure `apps/web/tsconfig.json` extends it.
  - [x] Ensure root `.gitignore` covers common Node/PNPM artifacts.
- [x] Move app to monorepo layout (AC: 4–5)
  - [x] Relocate `pricecontrol` to `apps/web`.
  - [x] Update `apps/web/package.json` name to `@pricecontrol/web`.
  - [x] Verify and fix path aliases so `@/*` points to `apps/web` source tree.
  - [x] Keep Tailwind, shadcn, and Next.js configs intact and working.
- [ ] Smoke run from root (AC: 6)
  - [ ] Run `pnpm install` at root; verify dependencies resolve.
  - [ ] Run `pnpm dev` at root; confirm the app serves and core pages load.
- [x] Documentation (AC: 7–8)
  - [x] Update root `README.md` with monorepo layout, commands, and notes that APIs are mocked for now.
  - [x] Note that environment config will be handled in a later story.

## Dev Notes
- Project setup
  - Package manager: pnpm (docs/index.md — Getting Started Preferences).
  - Monorepo layout: `apps/web` (AGENT_HANDOFF.md, docs/index.md).
  - Existing Next.js app currently resides in `pricecontrol/`; this story relocates it to `apps/web/` unchanged in behavior.
  - Keep the app using mock API client (`apps/web/lib/api.ts`) until auth/DB stories land.
- Do not add `.env.example` or secrets in this story (per PO direction and AGENT_HANDOFF sequencing).
- Target Node 20 and pnpm 9 per architecture’s development workflow.
 - Traceability:
   - Aligns with AGENT_HANDOFF.md → "Next Steps for BMAD Fullstack Agent Team" → Step 1: Monorepo Scaffolding.
   - Complements PRD Epic 1.1 (Project Initialization & Vercel Deployment) by preparing the repository structure; Vercel connection and deployment are deferred to that PRD story.
   - Architecture references: 11-Development Workflow (Node/pnpm), 14-Testing Strategy (testing expectations).

### Testing
- Architecture Testing Strategy (docs/architecture/14-testing-strategy.md):
  - Frontend unit/component tests co-located with components using Vitest + React Testing Library.
  - E2E tests in `e2e/` using Playwright.
- For this story, minimum verification is a smoke run: app builds and serves from monorepo root. No new tests are required yet; formal testing will begin when functional endpoints are added.

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-09-14 | 0.1 | Initial draft of Story 1.1 for monorepo scaffold and v0 import | Scrum Master |
| 2025-09-14 | 0.2 | PO validation complete, status set to Approved; added traceability notes | Product Owner |

## Dev Agent Record
### Agent Model Used
{{agent_model_name_version}}

### Debug Log References

### Completion Notes List

- Monorepo workspace configured at root with pnpm; app moved to `apps/web` and package renamed to `@pricecontrol/web`.
- `apps/web/tsconfig.json` now extends `../../tsconfig.base.json`; `@/*` alias remains scoped to `apps/web`.
- Root `.gitignore` expanded for Node/Next artifacts; no env files added per story scope.
- Smoke run pending due to environment restrictions (network installs). See instructions below to validate locally.

### File List

- Added: `pnpm-workspace.yaml`
- Added: `package.json` (root)
- Added: `tsconfig.base.json`
- Updated: `.gitignore`
- Moved: `pricecontrol/` → `apps/web/`
- Updated: `apps/web/package.json` (name → `@pricecontrol/web`)
- Updated: `apps/web/tsconfig.json` (extends base config)
- Updated: `README.md` (monorepo instructions)

## QA Results
