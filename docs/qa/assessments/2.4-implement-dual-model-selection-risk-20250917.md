# Risk Profile: Story 2.4

Date: 2025-09-17
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 5
- Critical Risks: 0
- High Risks: 1
- Medium Risks: 2
- Low Risks: 2
- Risk Score: 75/100

## High Risks Requiring Immediate Attention

### 1. PERF-001: User unaware of performance difference between models

**Score: 6 (High)**
**Probability**: High - "Thinking" models are inherently slower than "Instruct" models.
**Impact**: Medium - Users might be frustrated by the slow response time of the "Thinking" model if they are not aware of the trade-off.
**Mitigation**:
- Action: The UI must clearly communicate the expected performance of each model. The story suggests tooltips, which is a good solution.
- Owner: ux-expert
**Testing Focus**: Manual testing to ensure the tooltips are clear and helpful.

## Medium Risks

### 1. TECH-001: Model configuration mismatch

**Score: 4 (Medium)**
**Probability**: Medium - The available models on OpenRouter could change, making the configuration in `apps/web/lib/models.ts` outdated.
**Impact**: Medium - The model selection feature would be broken.
**Mitigation**:
- Action: Add a comment to the `models.ts` file to remind developers to update it when the OpenRouter models change.
- Owner: dev
**Testing Focus**: N/A

### 2. BUS-001: Unclear active model indicator

**Score: 4 (Medium)**
**Probability**: Medium - If the UI is not designed carefully, the user might not know which model is currently active.
**Impact**: Medium - This would lead to user confusion and frustration.
**Mitigation**:
- Action: The UI must have a clear and persistent indicator of the active model.
- Owner: ux-expert
**Testing Focus**: Manual testing to ensure the active model is always clearly indicated.

## Low Risks

### 1. TECH-002: Faulty `resolveModelForMode` logic

**Score: 2 (Low)**
**Probability**: Low - The logic is expected to be simple.
**Impact**: Medium - The wrong model would be used, leading to unexpected results.
**Mitigation**:
- Action: Add unit tests for the `resolveModelForMode` function.
- Owner: dev
**Testing Focus**: Unit tests covering all possible inputs.

### 2. TECH-003: Buggy client-side state management

**Score: 1 (Minimal)**
**Probability**: Low - This is a standard frontend task.
**Impact**: Low - A UI bug that can be easily fixed.
**Mitigation**:
- Action: Use a reliable state management solution.
- Owner: dev
**Testing Focus**: Component tests for the `ModelPicker`.

## Detailed Risk Register

| Risk ID  | Description             | Probability | Impact     | Score | Priority |
| -------- | ----------------------- | ----------- | ---------- | ----- | -------- |
| PERF-001 | Unaware of perf difference | High (3)    | Medium (2) | 6     | High     |
| TECH-001 | Model config mismatch   | Medium (2)  | Medium (2) | 4     | Medium   |
| BUS-001  | Unclear active model    | Medium (2)  | Medium (2) | 4     | Medium   |
| TECH-002 | Faulty `resolveModelForMode` | Low (1)     | Medium (2) | 2     | Low      |
| TECH-003 | Buggy state management  | Low (1)     | Low (1)    | 1     | Minimal  |

## Risk-Based Testing Strategy

### Priority 1: High Risk Tests
- Manual testing of the tooltips for the model selection.

### Priority 2: Medium Risk Tests
- Manual testing of the active model indicator.

### Priority 3: Low Risk Tests
- Unit tests for `resolveModelForMode`.
- Component tests for `ModelPicker`.
