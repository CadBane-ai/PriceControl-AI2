# Test Design: Story 2.6

Date: 2025-09-17
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 5
- Unit tests: 1 (20%)
- Integration tests: 4 (80%)
- E2E tests: 0 (0%)
- Priority distribution: P0: 4, P1: 1, P2: 0

## Test Scenarios by Acceptance Criteria

### AC1, AC2, AC3: LLM Tool Integration and System Prompt

| ID | Level | Priority | Test | Justification |
|---|---|---|---|---|
| 2.6-INT-001 | Integration | P0 | Verify that the `web.fetch` tool is called by the LLM when asked a question that requires web access. | Core functionality. |
| 2.6-INT-002 | Integration | P0 | Verify that a `ToolCallLog` entry is created after the `web.fetch` tool is called. | Audit trail. |
| 2.6-INT-003 | Integration | P1 | Verify that the system prompt is correctly loaded and passed to the LLM. | Core functionality. |

### AC4: Source Citations

| ID | Level | Priority | Test | Justification |
|---|---|---|---|---|
| 2.6-UNIT-001 | Unit | P0 | Verify that the frontend can correctly parse and display citations from the LLM's response. | User experience. |
| 2.6-INT-004 | Integration | P0 | Verify that the final response streamed to the user contains a citation when the `web.fetch` tool is used. | Core functionality. |

## Recommended Execution Order

1. P0 Unit tests
2. P0 Integration tests
3. P1 tests in order
