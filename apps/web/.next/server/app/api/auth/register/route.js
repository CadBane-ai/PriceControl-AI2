"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={67096:e=>{e.exports=require("bcrypt")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78143:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>w,patchFetch:()=>P,requestAsyncStorage:()=>y,routeModule:()=>x,serverHooks:()=>v,staticGenerationAsyncStorage:()=>f});var t={};s.r(t),s.d(t,{POST:()=>h});var a=s(26238),i=s(29722),o=s(54372),n=s(9836),u=s(40633),d=s(67096),l=s.n(d),p=s(7138),c=s(37836),m=s(61946);let g=u.Ry({email:u.Z_().email({message:"Invalid email address"}),password:u.Z_().min(6,{message:"Password must be at least 6 characters long"})});async function h(e){try{let r=await e.json(),s=g.safeParse(r);if(!s.success)return n.NextResponse.json({error:"Invalid input",details:s.error.errors},{status:400});let{email:t,password:a}=s.data;if(await p.db.query.users.findFirst({where:(0,m.eq)(c.r.email,t)}))return n.NextResponse.json({error:"User already exists"},{status:409});let i=await l().hash(a,10);return await p.db.insert(c.r).values({id:crypto.randomUUID(),email:t,hashedPassword:i}),n.NextResponse.json({message:"User registered successfully"},{status:201})}catch(e){if(console.error("Registration error:",e),"User already exists"===e.message)return n.NextResponse.json({error:"User already exists"},{status:409});return n.NextResponse.json({error:"Failed to register user"},{status:500})}}let x=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/home/kannan/PriceControl-AI2/apps/web/src/app/api/auth/register/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:v}=x,w="/api/auth/register/route";function P(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:f})}},37836:(e,r,s)=>{s.d(r,{r:()=>t});let t={email:Symbol("email")}},7138:(e,r,s)=>{s.d(r,{db:()=>t});let t={query:{users:{findFirst:async e=>null}}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[996,907,708],()=>s(78143));module.exports=t})();